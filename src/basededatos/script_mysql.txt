-- USER

drop table users;
drop table typeuser;

create table typeuser(
 type decimal(1) primary key,
 description varchar(15) not null
 );
insert into typeuser values (1,'Administrator');
insert into typeuser values (2,'Users');

create table users(
 email  varchar(50) primary key,
 pwd  varchar(32) not null,
 type decimal(1) not null ,
 accessfail ENUM ('1','2','3','0'),
 datecreation date,
 datelastaccess date,
 locked ENUM('S','N'),
 active ENUM('S','N')    
);
alter table users add constraint fk_users_type foreign key(type) references typeuser(type);

-- FILE

CREATE TABLE FILE_ANALYSE(
 ID_TYPE VARCHAR(20) PRIMARY KEY,
 DESCRIPTION VACHAR(40) NOT NULL,
 NUM_ANALYSE DECIMAL(20) NOT NULL DEFAULT 0,
 METADATA_DELETE DECIMAL(20) NOT NULL DEFAULT 0,
 SENSIBLE_METADATA_DELETE DECIMAL(20) NOT NULL DEFAULT 0
);

-- IMAGE

DROP TABLE IMAGE;

CREATE TABLE IMAGE(
 ID_IMG VARCHAR(50) PRIMARY KEY,
 OWNER VARCHAR(50) NOT NULL,
 DATE_CREATION DATE NOT NULL,
 DATE_EXPIRY DATE NOT NULL,
 URL_IMAGE VARCHAR(300) NOT NULL,
 URL_REDIRECT VARCHAR(300) NOT NULL,
 CONSTRAINT FK_IMAGE_USERS FOREIGN KEY (OWNER) REFERENCES USERS(EMAIL)
);

DROP TABLE EXPIRED_IMAGE;

CREATE TABLE EXPIRED_IMAGE(
 ID_IMG VARCHAR(50) PRIMARY KEY,
 OWNER VARCHAR(50) NOT NULL,
 DATE_CREATION DATE NOT NULL,
 DATE_EXPIRY DATE NOT NULL,
 URL_IMAGE VARCHAR(300) NOT NULL,
 URL_REDIRECT VARCHAR(300) NOT NULL,
 CONSTRAINT FK_EXPIRED_IMAGE_USERS FOREIGN KEY (OWNER) REFERENCES USERS(EMAIL)
);

-- TIME FOR IMAGE

DROP TABLE TIME_IMAGE;

CREATE TABLE TIME_IMAGE(
 TIME_MINUTES DECIMAL(8) PRIMARY KEY,
 DESCRIPTION VARCHAR(30)NOT NULL
);

INSERT INTO TIME_IMAGE VALUES (120,'2 Hours');
INSERT INTO TIME_IMAGE VALUES (240,'4 Hours');
INSERT INTO TIME_IMAGE VALUES (360,'6 Hours');
INSERT INTO TIME_IMAGE VALUES (480,'8 Hours');
INSERT INTO TIME_IMAGE VALUES (600,'10 Hours');
INSERT INTO TIME_IMAGE VALUES (720,'12 Hours');
INSERT INTO TIME_IMAGE VALUES (840,'14 Hours');
INSERT INTO TIME_IMAGE VALUES (960,'16 Hours');
INSERT INTO TIME_IMAGE VALUES (1080,'18 Hours');
INSERT INTO TIME_IMAGE VALUES (1200,'20 Hours');
INSERT INTO TIME_IMAGE VALUES (1320,'22 Hours');
INSERT INTO TIME_IMAGE VALUES (1440,'24 Hours');



